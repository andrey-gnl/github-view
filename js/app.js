!function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="js/",t(t.s=7)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={cards:[],page:1};t.default=a},function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});t.formatDate=function(e){var t=new Date(e),n=t.getFullYear(),a=t.getMonth()+1,r=t.getDate();return r<10&&(r="0"+r),a<10&&(a="0"+a),n+"-"+a+"-"+r},t.formSerialize=function(e){for(var t={},n=e.querySelectorAll("input, select, textarea"),a=0;a<n.length;++a){var r=n[a],o=r.name,i="checkbox"===r.getAttribute("type")?r.checked:r.value;o&&(t[o]=i)}return t},t.getArrayOfFieldsValue=function(e,t){return e.reduce(function(e,n){return!e.includes(n[t])&&n[t]?[].concat(a(e),[n[t]]):e},[])},t.uniqueArray=function(e){return e.filter(function(e,t,n){return t===n.indexOf(e)})},t.handleErrors=function(e){if(!e.ok)throw Error(e.statusText);return e},t.roundNum=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=["k","m","b","t"];t=Math.pow(10,t);for(var a=n.length-1;a>=0;a--){var r=Math.pow(10,3*(a+1));if(r<=e){e=Math.round(e*t/r)/t,1e3==+e&&a<n.length-1&&(e=1,a++),e+=n[a];break}}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterRepos=t.sortRepos=t.resetRepos=t.addMoreRepos=void 0;var a=n(11),r=n(3),o=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){return'<div class="list" id="list">'+l()+"</div>"},l=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.cards).reduce(function(e,t){return e+='<div class="list__item">'+(0,a.getRepo)(t)+"</div>"},"")},u=t.addMoreRepos=function(e){document.getElementById("list").insertAdjacentHTML("beforeEnd",l(e))},d=t.resetRepos=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.cards,t=document.getElementById("list");t.innerHTML="",t.insertAdjacentHTML("beforeEnd",l(e))},c=t.sortRepos=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.sortingParams,t=i.default.cards,n=e.order,a=e.type,r=[];switch(a){case"updated_at":r=t.sort(function(e,t){return new Date(e[a])-new Date(t[a])});break;case"name":r=t.sort(function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0});break;default:r=t.sort(function(e,t){return e[a]-t[a]})}"descending"===n&&r.reverse(),i.default.cards=r,i.default.filterParams?f():d()},f=t.filterRepos=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.filterParams,t=e.has_issues,n=e.stargazers_count,a=e.topics,o=e.date,s=e.language,l=e.type,u=i.default.cards,c="fork"===l,f=u.filter(function(e){return!(t&&!e.open_issues_count||!(e.stargazers_count>=n)||a&&!e.topics.length||!("none"===o||e.updated_at>o)||"all"!==s&&e.language!==s||"all"!==l&&e.fork!==c)});"all"!==s?r.BODY.classList.add("is-lang-filter"):r.BODY.classList.remove("is-lang-filter"),"all"!==l?r.BODY.classList.add("is-type-filter"):r.BODY.classList.remove("is-type-filter"),i.default.filteredRepos=f,d(f),p()},p=function(){var e=document.getElementById("count");e||(document.querySelector("#form-filters h2").insertAdjacentHTML("beforeEnd",'<span id="count"></span>'),e=document.getElementById("count")),e.innerHTML=i.default.filteredRepos.length+" <em>/ "+i.default.cards.length+"</em>"};t.default={createList:s,addMoreRepos:u,sortRepos:c,filterRepos:f}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BODY=document.querySelector("body"),t.REPOS_PER_PAGE=50},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),l=a(s),u=n(2),d=a(u),c=n(1),f=n(5),p=a(f),v=function(){function e(){o(this,e),this._isExists=!1,this._disabled=!1,this._template='<button type="button" class="btn" id="load-more">Load more</button>',this._wrap=document.getElementById("pagination")}return i(e,[{key:"init",value:function(){this._wrap.insertAdjacentHTML("beforeEnd",this._template),this._button=document.getElementById("load-more"),this._button.addEventListener("click",this._handleClick.bind(this)),this._isExists=!0}},{key:"isInited",value:function(){return this._isExists}},{key:"makeDisable",value:function(){this._disabled||(this._button.setAttribute("disabled",""),this._disabled=!0)}},{key:"makeActive",value:function(){this._disabled&&(this._button.removeAttribute("disabled"),this._disabled=!1)}},{key:"_handleClick",value:function(){var e=this;this.makeDisable();var t=new Headers({Accept:"application/vnd.github.mercy-preview+json"});this._button.classList.add("loading"),fetch("https://api.github.com/users/"+l.default.ownerName+"/repos?page="+(l.default.page+1)+"&per_page=50",{headers:t}).then(function(e){return e.json()}).then(function(t){l.default.cards=[].concat(r(l.default.cards),r(t));var n=(0,c.getArrayOfFieldsValue)(t,"language");l.default.langs=(0,c.uniqueArray)([].concat(r(l.default.langs),r(n))),p.default.updateLangSelect(n),l.default.sortingParams?d.default.sortRepos():l.default.filterParams?d.default.filterRepos():d.default.addMoreRepos(t),t.length>50&&e.makeActive(),l.default.page++,e._button.classList.remove("loading")})}}]),e}();t.default=new v},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.updateLangSelect=t.reset=t.templateInit=void 0;var o=n(0),i=a(o),s=n(2),l=a(s),u=n(1),d=!1,c=t.templateInit=function(){return d=!0,'<div class="forms">\n    <form class="form" id="form-filters">\n      <h2 class="h2">Filters</h2>\n      <div class="form-group">\n        <div class="form-item">\n          <label class="checkbox">\n            <input type="checkbox" name="has_issues">\n            <span>Has open issues</span>\n          </label>\n        </div>\n        <div class="form-item">\n          <label class="checkbox">\n            <input type="checkbox" name="topics">\n            <span>Has topics</span>\n          </label>\n        </div>\n        <div class="form-item">\n          <label class="select">\n            <span>Stars:</span>\n            <select name="stargazers_count">\n              <option value="0" selected>more than 0</option>\n              <option value="50">more than 50</option>\n              <option value="100">more than 100</option>\n              <option value="1000">more than 1000</option>\n            </select>\n          </label>\n        </div>\n        <div class="form-item">\n          <label class="select">\n            <span>Updated after:</span>\n            <select name="date">\n              <option value="none">None</option>\n              <option value="2016-10-01">November 2016</option>\n              <option value="2017-01-01">January 2017</option>\n              <option value="2017-03-01">March 2017</option>\n              <option value="2017-05-01">May 2017</option>\n              <option value="2017-07-01">July 2017</option>\n            </select>\n          </label>\n        </div>\n        <div class="form-item">\n          <label class="select">\n            <span>Type:</span>\n            <select name="type">\n              <option value="all">All</option>\n              <option value="fork">Forks</option>\n              <option value="sources">Sources</option>\n            </select>\n          </label>\n        </div>\n        <div class="form-item">\n          <label class="select">\n            <span>Language:</span>\n            <select name="language" id="lang-select">\n              <option value="all" selected>All</option>\n              '+i.default.langs.map(function(e){return'<option value="'+e+'">'+e+"</option>"})+'\n            </select>\n          </label>\n        </div>\n      </div>\n    </form>\n\n    <form class="form" id="form-sorting">\n      <h2 class="h2">Sorting</h2>\n      <div class="form-group">\n        <div class="form-item">\n          <label class="select">\n            <span>Order:</span>\n            <select name="order">\n              <option value="ascending" selected>Ascending</option>\n              <option value="descending">Descending</option>\n            </select>\n          </label>\n        </div>\n        <div class="form-item">\n          <label class="select">\n            <span>By:</span>\n            <select name="type">\n              <option value="name" selected>Name</option>\n              <option value="stargazers_count">Stars</option>\n              <option value="open_issues_count">Open issue count</option>\n              <option value="updated_at">Updated date</option>\n            </select>\n          </label>\n        </div>\n      </div>\n    </form>\n  </div>\n'},f=t.reset=function(){var e=document.getElementById("form-filters"),t=document.getElementById("form-sorting");e.reset(),t.reset()},p=t.updateLangSelect=function(e){var t=document.getElementById("lang-select"),n=t.querySelectorAll("option"),a=[].concat(r(n)).map(function(e){return e.value});e.forEach(function(e){a.includes(e)||t.insertAdjacentHTML("beforeEnd",'<option value="'+e+'">'+e+"</option>")})},v=t.init=function(){var e=document.getElementById("form-filters"),t=document.getElementById("form-sorting");e.addEventListener("change",m),t.addEventListener("change",g)},m=function(e){var t=e.currentTarget,n=(0,u.formSerialize)(t);i.default.filterParams=n,l.default.filterRepos()},g=function(e){var t=e.currentTarget,n=(0,u.formSerialize)(t);i.default.sortingParams=n,l.default.sortRepos()};t.default={init:v,templateInit:c,updateLangSelect:p,inited:d,reset:f}},function(e,t,n){"use strict";n(10),n(4),n(8)},function(e,t,n){"use strict";n(6)},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=n(1),l=n(3);l.BODY.addEventListener("click",function(e){var t=e.target;if(t.closest(".repo")){if(!u.loading){var n=e.target.closest(".repo").dataset.id,a=i.default.cards.find(function(e){return+e.id==+n});new u(a,e.target.closest(".repo"))}e.preventDefault()}t.closest("#close-modal")&&(u.closeModal(),e.preventDefault())}),l.BODY.addEventListener("keyup",function(e){27===e.keyCode&&u.exists&&u.closeModal()});var u=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments[1];a(this,e);var o={};r.classList.add("loading"),e.loading=!0,fetch("https://api.github.com/repos/"+i.default.ownerName+"/"+n.name).then(s.handleErrors).then(function(e){return e.json()}).then(function(e){var t=e.full_name,n=e.html_url,a=e.fork,r=e.name,i=e.parent,s=e.contributors_url;return Object.assign(o,{full_name:t,html_url:n,fork:a,name:r,parent:i,contributors_url:s}),fetch(s)}).then(s.handleErrors).then(function(e){return e.json()}).then(function(e){return Object.assign(o,{contributors:e}),fetch("https://api.github.com/repos/"+i.default.ownerName+"/"+n.name+"/pulls?sort=popularity&per_page=5&type=open")}).then(s.handleErrors).then(function(e){return e.json()}).then(function(n){Object.assign(o,{pulls:n.reverse()}),r.classList.remove("loading"),e.loading=!1,e.exists=!0,l.BODY.insertAdjacentHTML("beforeEnd",t._getModal(o))}).catch(function(t){r.classList.remove("loading"),console.log(t),e.loading=!1,e.exists=!1})}return r(e,[{key:"_getModal",value:function(e){var t=e.full_name,n=e.html_url,a=e.fork,r=e.parent,o=e.contributors,i=e.pulls;return'<div class="modal" id="modal">\n    <div class="modal__inner">\n\n    <div class="modal__close">\n      <button class="btn-close" id="close-modal">\n        <svg viewBox="0 0 40 40">\n          <path class="close-x" d="M 10,10 L 30,30 M 30,10 L 10,30"></path>\n        </svg>\n        esc\n      </button>\n    </div>\n\n    <div class="modal__title">'+t+'</div>\n    <div class="modal__body">\n      <div class="info">\n        <div class="info__property">link to repo</div>\n        <div class="info__value">\n          <a href="'+n+'">'+n+"</a>\n        </div>\n      </div>\n\n      "+(a?'<div class="info">\n      <div class="info__property">Source</div>\n      <div class="info__value">\n        <a href="'+r.html_url+'">'+r.html_url+"</a>\n      </div>\n    </div>":"")+'\n\n      <div class="info">\n        <div class="info__property">Contributors</div>\n        <div class="info__value">\n          '+this._getContributors(o)+'\n        </div>\n      </div>\n      <div class="info">\n        <div class="info__property">Most commented PRs</div>\n        <div class="info__value">\n          '+this._getPulls(i)+"\n        </div>\n      </div>\n    </div>\n  </div>\n  </div>"}},{key:"_getContributors",value:function(e){var t=e.length>=3?3:e.length,n="";if(!t)return"there is no contributors... :(";for(var a=0;a<t;a++){var r=e[a];n+='<div class="info__row">\n      <div class="info__cell"><a href="'+r.url+'" class="info__name">'+(r.avatar_url?'<div class="info__img" style="background-image: url(\''+r.avatar_url+"')\"></div>":"")+r.login+'</a></div>\n      <div class="info__cell">'+r.contributions+"</div>\n    </div>"}return n}},{key:"_getPulls",value:function(e){var t=e.length,n="";if(!t)return"there is no pulls... :(";for(var a=0;a<t;a++){var r=e[a];n+='<li><a href="'+r.html_url+'">'+r.title+"</a></li>"}return"<ol>"+n+"</ol>"}}]),e}();u.closeModal=function(){document.getElementById("modal").remove(),u.exists=!1},t.default=u},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=a(r),i=n(2),s=a(i),l=document.getElementById("content"),u=function(){l.innerHTML="",o.default.inited?o.default.reset():l.insertAdjacentHTML("beforeEnd",o.default.templateInit()),l.insertAdjacentHTML("beforeEnd",s.default.createList()),o.default.init()};t.default={init:u}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var r=n(0),o=a(r),i=n(9),s=a(i),l=n(4),u=a(l),d=n(1),c=n(3),f=document.getElementById("owner-name"),p=document.getElementById("get-repos-form"),v=document.getElementById("get-repos"),m=function(e){return'<div class="danger" id="error-message">Error: '+e+"</div>"},g=!1,_=!1;p.addEventListener("submit",function(e){e.preventDefault();var t=f.value;if(t.length&&t!==o.default.ownerName&&!g){g=!0,v.classList.add("loading"),v.setAttribute("disabled","");var n=new Headers({Accept:"application/vnd.github.mercy-preview+json"});fetch("https://api.github.com/users/"+t+"/repos?per_page="+c.REPOS_PER_PAGE,{headers:n}).then(d.handleErrors).then(function(e){return e.json()}).then(function(e){o.default.cards=e,o.default.langs=(0,d.getArrayOfFieldsValue)(o.default.cards,"language"),o.default.filterParams=null,o.default.sortParams=null,o.default.ownerName=t,_&&(f.classList.remove("has-error"),document.getElementById("error-message").remove()),s.default.init(),v.removeAttribute("disabled"),v.classList.remove("loading"),g=!1,_=!1,!u.default.isInited()&&u.default.init(),e.length<c.REPOS_PER_PAGE?u.default.makeDisable():u.default.makeActive()}).catch(function(e){f.classList.add("has-error"),f.insertAdjacentHTML("afterend",m(e.message)),_=!0,g=!1,v.removeAttribute("disabled"),v.classList.remove("loading")})}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRepo=void 0;var a=n(1),r=function(e){var t=e.id,n=e.name,r=e.description,o=e.stargazers_count,i=e.updated_at,s=e.language;return'\n  <a href="#" class="repo" data-id="'+t+'">\n    <div class="repo__name">'+n+"</div>\n    "+(e.fork?'<div class="repo__forked">Is forked</div>':"")+'\n    <div class="repo__description">'+(r||"<em>No description</em>")+'</div>\n    <div class="repo__footer">\n      <div class="repo__stars">&#9733; <strong>'+(0,a.roundNum)(o)+'</strong>  </div>\n      <div class="repo__lang">Lang: '+(s||"-")+'</div>\n      <div class="repo__date">Updated on '+(0,a.formatDate)(i)+"</div>\n    </div>\n  </a>\n"};t.getRepo=r}]);